(this["webpackJsonpreact-redux-ts-bootstrap"]=this["webpackJsonpreact-redux-ts-bootstrap"]||[]).push([[0],{13:function(e,a,t){e.exports={owner:"Message_owner__3aIXn",external:"Message_external__R5t6E",messageContainer:"Message_messageContainer__22m0K",messageInfo:"Message_messageInfo__1YKGt",userName:"Message_userName__2wrmo"}},16:function(e,a,t){e.exports={chatListItemContainer:"ChatListItem_chatListItemContainer__1f3zn",nameTime:"ChatListItem_nameTime__OZRn1",lastMessage:"ChatListItem_lastMessage__2VXiS",selectedChat:"ChatListItem_selectedChat__C9NhC"}},20:function(e,a,t){e.exports={container:"ChatWindow_container__2jOJR",inactiveChat:"ChatWindow_inactiveChat__mrrro",inactiveChatOverlay:"ChatWindow_inactiveChatOverlay__3Mcmi"}},23:function(e,a,t){e.exports={container:"NoSelectedChatroom_container__1kc0X",infoText:"NoSelectedChatroom_infoText__2nwPz"}},24:function(e,a,t){e.exports={actionButtonsContainer:"CreateChat_actionButtonsContainer__GtUVB",groupCreateLabel:"CreateChat_groupCreateLabel__1t69o"}},32:function(e,a,t){e.exports={container:"Conversations_container__11Oy7"}},33:function(e,a,t){e.exports={container:"InfoBar_container__3Ro-u"}},36:function(e,a,t){e.exports={container:"Sidebar_container__yw-NV"}},37:function(e,a,t){e.exports={container:"Main_container__353I5"}},38:function(e,a,t){e.exports=t(64)},64:function(e,a,t){"use strict";t.r(a);var n,r=t(0),c=t.n(r),o=t(9),i=t.n(o),s=t(5),l=t(21),u=t(19);!function(e){e.group="group",e.individual="individual"}(n||(n={}));var m=t(8),d=t.n(m),p={users:[{displayName:"Jon Snow",userName:"j.snow"},{displayName:"Arya Stark",userName:"arya.needle"},{displayName:"Jaimie Lannister",userName:"j.kingslayer"},{displayName:"Rob Stark",userName:"dies.at.wedding"},{displayName:"The Mountain",userName:"explosive.head"}],ownerUser:{displayName:"Sandor Clegane",userName:"burnt.flesh"},activeChatroomId:null,chatrooms:[],startChatOpen:!1},f=Object(u.b)({name:"chatrooms",initialState:p,reducers:{changeSelectecChatroomId:function(e,a){e.activeChatroomId=a.payload},addChatroom:function(e,a){e.chatrooms=[].concat(Object(l.a)(e.chatrooms),[a.payload])},addMessage:function(e,a){var t=e.chatrooms.find((function(e){return e.id===a.payload.chatroomId}));t&&(t.messages=[].concat(Object(l.a)(t.messages),[a.payload.message],Object(l.a)(function(e,a){var t=[];return e.forEach((function(e){t.push({sentTime:d()().toISOString(),text:"".concat(a," \ud83d\ude42"),sender:e})})),t}(t.participants,a.payload.message.text))))},changeDraftMessage:function(e,a){var t=e.chatrooms.find((function(e){return e.id===a.payload.chatroomId}));t&&(t.draftMessage=a.payload.message)},clearDraftMessage:function(e,a){var t=e.chatrooms.find((function(e){return e.id===a.payload}));t&&(t.draftMessage="")},setStartChatOpen:function(e,a){e.startChatOpen=a.payload}}}),h=f.actions,v=h.changeSelectecChatroomId,g=h.addChatroom,C=h.addMessage,b=h.changeDraftMessage,_=h.clearDraftMessage,N=h.setStartChatOpen,E=function(e){return e.app.activeChatroomId},y=function(e){return e.app.users},O=function(e){return e.app.chatrooms},j=function(e){return e.app.ownerUser},M=function(e){return e.app.startChatOpen},S=function(e){var a=e.app.activeChatroomId;return e.app.chatrooms.find((function(e){return e.id===a}))},w=t(32),I=t.n(w),x=t(13),k=t.n(x),T=function(e){var a=e.ownerUser,t=e.sentTime,n=e.message,r=e.user,o=e.isGroup,i=a.userName===r.userName;return c.a.createElement("div",{className:i?k.a.owner:k.a.external},c.a.createElement("div",{className:k.a.messageContainer},n),c.a.createElement("div",{className:k.a.messageInfo},!i&&o?c.a.createElement("span",{className:k.a.userName},r.displayName," "):null,c.a.createElement("span",null,d()(t).format("MMM d, hh:mm"))))};function L(){var e=Object(s.c)(S),a=Object(s.c)(j);return c.a.createElement("div",{className:I.a.container},null===e?c.a.createElement("div",null,"Select or start a conversation first"):null===e||void 0===e?void 0:e.messages.map((function(t){return c.a.createElement(T,{key:"".concat(t.sender.userName).concat(t.sentTime),isGroup:e.type===n.group,sentTime:t.sentTime,message:t.text,user:t.sender,ownerUser:a})})))}var B=t(33),G=t.n(B);function U(){var e,a=Object(s.c)(E),t=Object(s.c)((e=a,function(a){if(null===e)return"";var t=a.app.chatrooms.find((function(a){return a.id===e}));return t?t.type===n.group?t.groupName:t.participants[0].displayName:""})),r=Object(s.c)(S);return c.a.createElement("div",{className:G.a.container},t,(null===r||void 0===r?void 0:r.type)===n.group?" (group) ":null)}var D=t(65),J=t(34),R=t(67);function W(){var e=Object(s.b)(),a=Object(s.c)(E),t=Object(s.c)(j),n=Object(s.c)(S),r=function(){var r=n?n.draftMessage:"";if(r.trim()){var c={text:r,sentTime:d()().toISOString(),sender:t};e(C({chatroomId:a||"",message:c})),e(_(a||""))}};return c.a.createElement("div",null,c.a.createElement(D.a,null,c.a.createElement(J.a,{placeholder:"Type a message","aria-describedby":"basic-addon2",value:n?n.draftMessage:"",onChange:function(t){var n=t.target.value;e(b({chatroomId:a||"",message:n}))},onKeyUp:function(e){e.preventDefault(),13===e.keyCode&&r()}}),n&&""!==n.draftMessage?c.a.createElement(R.a,{variant:"light",onClick:r},"Send"):null))}var K=t(20),V=t.n(K),X=t(23),z=t.n(X);function H(){return c.a.createElement("div",{className:z.a.container},c.a.createElement("span",{className:z.a.infoText},"No active chats"))}function A(){var e=Object(s.c)(E),a=Object(s.c)(M);return c.a.createElement("div",{className:"".concat(V.a.container).concat(a&&e?" ".concat(V.a.inactiveChat):"")},null!==e?c.a.createElement(c.a.Fragment,null,c.a.createElement(U,null),c.a.createElement(L,null),c.a.createElement(W,null)):c.a.createElement(H,null),a&&null!==e?c.a.createElement("div",{className:V.a.inactiveChatOverlay}):null)}var F=t(16),P=t.n(F);function Y(e){var a=e.chatName,t=e.lastMessage,n=e.isSelected,r=e.onClick;return c.a.createElement("div",{onClick:r,className:"".concat(P.a.chatListItemContainer).concat(n?" ".concat(P.a.selectedChat):"")},c.a.createElement("div",{className:P.a.nameTime},c.a.createElement("div",null,a),t?c.a.createElement("div",null,d()(t.sentTime).format("HH:MM")):null),t?c.a.createElement("div",{className:P.a.lastMessage},t.text):null)}function Z(){var e=Object(s.c)(O),a=Object(s.c)(E),t=Object(s.b)(),r=e.map((function(e){var r=e.type===n.group?e.groupName:e.participants[0].displayName;return c.a.createElement(Y,{key:e.id,isSelected:a===e.id,lastMessage:e.messages[e.messages.length-1],chatName:r||"",onClick:function(){return a=e.id,void t(v(a));var a}})}));return c.a.createElement("div",null,r)}var $=t(17),q=t(24),Q=t.n(q),ee=t(25),ae=t(66),te=function(e,a){return e.length>1&&""!==a.trim()};function ne(){var e=Object(s.c)(y),a=Object(r.useState)(null),t=Object($.a)(a,2),o=t[0],i=t[1],l=Object(r.useState)([]),u=Object($.a)(l,2),m=u[0],d=u[1],p=Object(r.useState)(!1),f=Object($.a)(p,2),h=f[0],C=f[1],b=Object(r.useState)(""),_=Object($.a)(b,2),E=_[0],j=_[1],M=Object(s.b)(),S=Object(s.c)(O),w=c.a.createElement(ee.a,{isSearchable:!0,isClearable:!0,placeholder:"Chat participant...",name:"user-search-single",hideSelectedOptions:!0,onChange:function(e){return i(e?e.value:null)},options:e.map((function(e){return{label:e.displayName,value:e.userName}}))}),I=c.a.createElement(ee.a,{hideSelectedOptions:!0,isSearchable:!0,isClearable:!0,placeholder:"Chat participants...",name:"user-search-multiple",isMulti:!0,onChange:function(e){return d(e)},options:e.map((function(e){return{label:e.displayName,value:e.userName}}))});return c.a.createElement("div",null,c.a.createElement("div",{className:Q.a.actionButtonsContainer},c.a.createElement(R.a,{variant:"secondary",onClick:function(){M(N(!1))}},"< Back"),c.a.createElement(R.a,{disabled:h?!te(m,E):null===o,variant:"light",onClick:function(){var a="";if(h&&E&&m.length>0){var t=function(e,a){var t=e.map((function(e){return{userName:e.value,displayName:e.label}}));return{type:n.group,groupName:a,participants:t,id:"".concat(Math.random()),messages:[],draftMessage:""}}(m,E);a=t.id,M(g(t))}if(!h&&o){var r=function(e,a){return e.find((function(e){return e.type===n.individual&&e.participants.find((function(e){return e.userName===a}))}))}(S,o);if(r)a=r.id;else{var c=function(e,a){var t=e.find((function(e){return e.userName===a}));return{type:n.individual,participants:t?[t]:[],id:"".concat(Math.random()),messages:[],draftMessage:""}}(e,o);a=c.id,M(g(c))}}M(v(a)),M(N(!1))}},"Create")),h?I:w,h?c.a.createElement(D.a,null,c.a.createElement(J.a,{placeholder:"Group name","aria-describedby":"basic-addon2",value:E,onChange:function(e){var a=e.target.value;j(a)}})):null,c.a.createElement(ae.a.Check,{type:"switch",id:"custom-switch",label:c.a.createElement(ae.a.Text,{className:Q.a.groupCreateLabel},"Group"),checked:h,onChange:function(){C(!h)}}))}var re=t(36),ce=t.n(re);function oe(){var e=Object(s.c)(M),a=Object(s.b)();return c.a.createElement("div",{className:ce.a.container},e?null:c.a.createElement(R.a,{onClick:function(){a(N(!0))},variant:"outline-light"},"Start new chat +"),e?c.a.createElement(ne,null):c.a.createElement(Z,null))}var ie=t(37),se=t.n(ie);var le=function(){return c.a.createElement("div",{className:se.a.container},c.a.createElement(oe,null),c.a.createElement(A,null))},ue=Object(u.a)({reducer:{app:f.reducer},devTools:{trace:!0}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,{store:ue},c.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.bcf0f7a4.chunk.js.map